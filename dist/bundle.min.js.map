{"version":3,"sources":["webpack://pocketsphinx-web/webpack/universalModuleDefinition","webpack://pocketsphinx-web/webpack/bootstrap","webpack://pocketsphinx-web/(webpack)/buildin/amd-options.js","webpack://pocketsphinx-web/(webpack)/buildin/amd-define.js","webpack://pocketsphinx-web/./src/worker/recognizer.worker.js","webpack://pocketsphinx-web/./src/util/get-microphone.js","webpack://pocketsphinx-web/./src/util/callback-manager.js","webpack://pocketsphinx-web/./src/worker/audio-recorder.worker.js","webpack://pocketsphinx-web/./src/util/audio-recorder.js","webpack://pocketsphinx-web/./src/sphinx.js","webpack://pocketsphinx-web/(webpack)/buildin/module.js","webpack://pocketsphinx-web/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","t","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","e","__webpack_amd_options__","Error","Worker","AudioContext","webkitAudioContext","getUserMedia","navigator","webkitGetUserMedia","mozGetUserMedia","Promise","resolve","reject","audioContext","audio","stream","input","createMediaStreamSource","firefox_audio_hack","currentId","callbackPool","this","add","cb","id","recordWorker","source","cfg","config","errorCallback","inputBufferLength","outputBufferLength","worker","consumers","context","node","createScriptProcessor","postMessage","command","sampleRate","outputSampleRate","recording","onaudioprocess","buffer","inputBuffer","getChannelData","start","data","forEach","consumer","length","stop","cancel","that","onmessage","error","connect","destination","AudioRecorder","CallbackManager","getMicrophone","recogWorker","Sphinx","_callbackManager","recorder","_startRecorder","recognizer","_startRecognizer","startRecording","grammar_id","then","stopRecording","onrecognition","initialize","_initialized","init_recognizer","_initRecognizer","bind","_postMessage","set_consumer","all","results","push","addWords","words","processExistingChunk","addGrammar","grammar","configure","_this","self","evt","status","onerror","msg","manager","_this2","message","callbackId","webpackPolyfill","deprecate","paths","children","__WEBPACK_AMD_DEFINE_RESULT__","apply"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pocketsphinx-web\"] = factory();\n\telse\n\t\troot[\"pocketsphinx-web\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"165ebcf0b08cb99be8a8.worker.js\");\n};","'use strict';\n\n//Handle vendor prefixes\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n\nfunction getMicrophone(){\n    return new Promise((resolve, reject) => {\n        var audioContext;\n        try {\n            audioContext = new AudioContext();\n        } catch (e) {\n            reject(e);\n        }\n        //Initialize Microphone\n        try {\n            getUserMedia.call(navigator, {audio: true},\n                //Success:\n                (stream) => {\n                    var input = audioContext.createMediaStreamSource(stream);\n                    // Firefox hack https://support.mozilla.org/en-US/questions/984179\n                    window.firefox_audio_hack = input;\n                    resolve(input);\n                },\n                //Failure\n                (e) => { reject(e); });\n        } catch (e) {\n            reject(e);\n        }\n    })\n}\n\n\nmodule.exports = getMicrophone;\n","'use strict';\n\nvar CallbackManager = function() {\n  var currentId = 0;\n  var callbackPool = {};\n  this.add = function(cb) {\n    var id = currentId;\n    callbackPool[id] = cb;\n    currentId++;\n    return id;\n  };\n  this.get = function(id) {\n    if (callbackPool.hasOwnProperty(id)) {\n      var cb = callbackPool[id];\n      delete callbackPool[id];\n      return cb;\n    }\n    return null;\n  };\n};\n\n\nmodule.exports = CallbackManager;\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"6eb6835b5c8758007259.worker.js\");\n};","'use strict';\nvar recordWorker = require('../worker/audio-recorder.worker.js')\n\nvar AudioRecorder = function(source, cfg) {\n  var config             = cfg || {};\n  var errorCallback      = config.errorCallback || function() {};\n  var inputBufferLength  = config.inputBufferLength || 4096;\n  var outputBufferLength = config.outputBufferLength || 4000;\n  var worker             = new recordWorker()\n\n  this.consumers = [];\n  this.context   = source.context;\n  this.node      = this.context.createScriptProcessor(inputBufferLength);\n  worker.postMessage({\n    command: 'init',\n    config: {\n      sampleRate:         this.context.sampleRate,\n      outputBufferLength: outputBufferLength,\n      outputSampleRate:   (config.outputSampleRate || 16000)\n    }\n  });\n\n  var recording = false;\n  this.node.onaudioprocess = function(e) {\n    if (!recording){ return; }\n    worker.postMessage({\n      command: 'record',\n      buffer: [\n        e.inputBuffer.getChannelData(0),\n        e.inputBuffer.getChannelData(1)\n      ]\n    });\n  };\n\n  this.start = function(data) {\n    this.consumers.forEach(function(consumer) {\n      consumer.postMessage({ command: 'start', data: data });\n      recording = true;\n      return true;\n    });\n    recording = true;\n    return (this.consumers.length > 0);\n  };\n  this.stop = function() {\n    if (recording) {\n      this.consumers.forEach(function(consumer) {\n        consumer.postMessage({ command: 'stop' });\n      });\n      recording = false;\n    }\n    worker.postMessage({ command: 'clear' });\n  };\n  this.cancel = function() {\n    this.stop();\n  };\n\n  var that = this;\n  worker.onmessage = function(e) {\n    if (e.data.error && (e.data.error === 'silent')){\n      errorCallback('silent');\n    }\n    if ((e.data.command === 'newBuffer') && recording) {\n      that.consumers.forEach(function(consumer) {\n        consumer.postMessage({ command: 'process', data: e.data.data });\n      });\n    }\n  };\n  source.connect(this.node);\n  this.node.connect(this.context.destination);\n};\n\n\nmodule.exports = AudioRecorder;\n","'use strict';\n\n//Imports:\nvar AudioRecorder   = require('./util/audio-recorder');\nvar CallbackManager = require('./util/callback-manager');\nvar getMicrophone   = require('./util/get-microphone');\nvar recogWorker     = require('./worker/recognizer.worker.js')\n//Constructor\nfunction Sphinx(){\n    this._callbackManager = new CallbackManager();\n    this.recorder         = this._startRecorder();\n    this.recognizer       = this._startRecognizer();\n}\n//Control\nSphinx.prototype.startRecording = function(grammar_id){\n  return this.recorder\n    .then(function(recorder){\n      recorder.start(grammar_id);\n    });\n};\nSphinx.prototype.stopRecording = function(){\n  return this.recorder\n    .then(function(recorder){\n      recorder.stop();\n    });\n};\n//Callbacks\nSphinx.prototype.onrecognition = function(){};\n\n// This initializes the recognizer. When it calls back, we add words\nSphinx.prototype.initialize = function() {\n  if(!this._initialized){\n    var init_recognizer = this.recognizer\n      .then(this._initRecognizer.bind(this))\n      .then(this._postMessage({ command: 'initialize' }));\n\n    var set_consumer = Promise.all([this.recorder, this.recognizer])\n      .then(function(results){\n        var recorder   = results[0];\n        var recognizer = results[1];\n        recorder.consumers.push(recognizer);\n      });\n\n    this._initialized = Promise.all([init_recognizer, set_consumer]);\n  }\n\n  return this._initialized;\n};\n// This adds words to the recognizer\nSphinx.prototype.addWords = function(words) {\n  return this.recognizer\n    .then(this._postMessage({\n      command: 'addWords',\n      data:    words\n    }));\n};\n\nSphinx.prototype.processExistingChunk = (inputBuffer) => {\n    return this.recognizer\n        .then(this._postMessage({\n            command: 'processBuffer',\n            data: { data: [], buffer: buffer }\n        }))\n}\n// This adds a grammar to the recognizer\nSphinx.prototype.addGrammar = function(grammar) {\n  return this.recognizer\n    .then(this._postMessage({\n      command: 'addGrammar',\n      data:    grammar\n    }));\n};\n// This adds words and a grammar to the recognizer\nSphinx.prototype.configure = function(words, grammar){\n  const initial = this.initialize()\n    .then(() => {\n        return this.addWords(words);\n    })\n    .then(() => {\n        return this.addGrammar(grammar);\n    });\n    return initial\n};\n\n\nSphinx.prototype._startRecorder   = function(){\n  return getMicrophone()\n    .then((input) => {\n      // Once the user authorises access to the microphone, we instantiate the recorder\n      return new AudioRecorder(input, {\n        errorCallback: function() { /* ??? */ }\n      });\n    });\n\n};\nSphinx.prototype._startRecognizer = function(){\n    const worker = new recogWorker();\n    //Not rebuilding\n    const promise = new Promise((resolve, reject) => {\n        worker.onmessage = function() {\n            resolve(worker);\n        };\n        worker.postMessage('');\n    })\n    return promise\n};\nSphinx.prototype._initRecognizer = function(worker){\n  var self = this;\n\n  // This is the onmessage function, once the worker is fully loaded\n  worker.onmessage = function(evt) {\n    // This is the case when we have a callback id to be called\n    if (evt.data.hasOwnProperty('id')) {\n      var cb = self._callbackManager.get(evt.data.id);\n      if(cb){\n        var data = {};\n        if (evt.data.hasOwnProperty('data')){\n          data = evt.data.data;\n        }\n        cb(data);\n      }\n    }\n    // This is a case when the recognizer has a new hypothesis\n    if (evt.data.hasOwnProperty('hyp')) {\n      self.onrecognition(evt);\n    }\n    // This is the case when we have an error\n    if (evt.data.hasOwnProperty('status') && (evt.data.status === 'error')) {\n      self.onerror(evt);\n    }\n  };\n\n  return worker;\n};\nSphinx.prototype._postMessage = function(msg){\n    const manager = this._callbackManager;\n\n    return function(worker){\n        const message = msg || {};\n        return new Promise((resolve, reject) => {\n            message.callbackId = manager.add(resolve.bind(this));\n            worker.postMessage(message);\n        })\n    };\n};\n\nmodule.exports = Sphinx;\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","'use strict';\n\nvar Sphinx = require('./sphinx');\n\n(function(){\n  /* global define */\n  if ((typeof define !== 'undefined' && define !== null) && (define.amd !== null)) {\n    define([], function() {\n      return Sphinx;\n    });\n  } else if ((typeof module !== 'undefined' && module !== null) && (module.exports !== null)) {\n    module.exports = Sphinx;\n  }\n\n  this.Sphinx = Sphinx;\n}).call(window || this);\n"],"sourceRoot":""}